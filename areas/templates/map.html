{% load static %}


<!DOCTYPE html>

<!-- Iteration 2-->
<!-- Main HTML-->
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Safe Explorer</title>
        <link rel="icon" type="image/x-icon" href="{% static 'assets/favicon.ico' %}" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>


        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->

        <!-- Iteration 3: -->
        <link href="{% static 'css/styles.css' %}" rel="stylesheet" />
        <!-- Leaflet Maps Plugin -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
        <!-- Leaflet Geocoding Plugin -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
        <!-- Leaflet Search Plugin -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet-search/dist/leaflet-search.min.css" />  
    
        <style>
            #map{
                height: 500px;
                width: 100%;
            }
            .leaflet-container :focus:not(:focus-visible) {
                outline: 0;
              }
            
            .info {
                padding: 6px 8px;
                font: 14px/16px Arial, Helvetica, sans-serif;
                background: white;
                background: rgba(255,255,255,0.8);
                box-shadow: 0 0 15px rgba(0,0,0,0.2);
                border-radius: 5px;
            }
            .info h4 {
                margin: 0 0 5px;
                color: #777;
            }
        </style>
    </head>

    <body>
    <!-- Iteration 3 
    {% load leaflet_tags %}
    {% leaflet_map "map" callback="map_init" %}
    {% leaflet_css %}
    {% leaflet_js %}
        -->
          
        <!-- Iteration 2 --> 
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
            <div class="container px-5">
                <a class="navbar-brand" href="/">Safe Explorer</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="{% url 'map' %}">Location Search</a></li>
                        <li class="nav-item dropdown">
                            <!-- Iteration 5-->
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                              Menu
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                              <a class="dropdown-item" href="#">Create a Review</a>
                              <a class="dropdown-item" href="#">Browse Crime Data</a>
                              <a class="dropdown-item" href="#">Edit Profile</a>
                            </div>
                          </li>
          
                        {% if user.is_authenticated %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'logout_user' %}">Logout</a></li>
                        {% else %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'login_user' %}">Log In</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Iteration 2 -->  
        <!-- Header-->
        <header class="masthead text-center text-white has-bg-img" style="background-image:url({% static 'assets/img/cork1.jpg' %})">
            <div class="masthead-content has-bg-img">        
                <div class="container px-5">
                    <!-- Iteration 2 -->   
                    <!-- REF: Text Shadow Effect - layering over shadows to make shadow darker (Stackoverflow, 2016) -->
                    <h1 class="masthead-heading mb-0" style="text-shadow: 0 0 32px black, 0 0 32px black, 0 0 32px black, 0 0 32px black">Map Search</h1>
                    <h4 style="text-shadow: 0 0 32px black, 0 0 32px black, 0 0 32px black, 0 0 32px black">Show safety ratings and reviews for any area around the world.</h4>
                </div>
            </div>
        </header>

        <!-- Iteration 2 -->    
        <!-- Search Bar and Location Name-->
        <!-- REF: Working with grids (GetBootstrap, 2023) -->
        <section id="search-bar">
            <div class="container px-5" style="padding-top:30px">
                <div class="row gx-5 align-items-center"> 
                
                        <!-- Left: Dropdown-->
                        <div class="col-lg-6 order-lg-2 d-flex align-items-center justify-content-center">
                            <div class="col-md-6 text-center">
                                <h3 class="form-label">Area Search</h3>
                                
                                <form>
                                <select id="dropdown_sectors" class="form-select" name="dropdown_sectors">
                                    <option selected>Cork (All)</option>

                                    <!-- Show all unique values of police deparments, ie sectors-->
                                    {% for PoliceDivision in police_list %}
                                    <option value="{{ PoliceDivision.policeName }}">{{ PoliceDivision.policeName }}</option>
                                    {% endfor %}

                                </select>
                                <button type="submit" class="btn btn-primary btn-block mt-3" style="width: 300px">Search</button>
                            </form>
                            </div>
                        </div>

                 

                    <!-- Right: Location Name -->
                    <div class="col-lg-6 order-lg-1">
                        <div class="p-5" style="text-align:center">
                            <h3 class="display-4" id='location-name'>Cork City</h3>
                            <h4>Co. Cork, Ireland</h4>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <div class="container pt-4 text-center">
            <p>Tip: Use the <span style="font-weight: bold; color: black;">search icon</span> on the <span style="font-weight: bold; color: black;">map</span> to search for an address.</p>
        </div>

        <!-- Iteration 3: -->
        <!-- LEAFLET MAP -->
        <section >                     
            <div class="container px-5">
                <div id= "map"class="row gx-5 align-items-center"></div>
            </div>         
        </section>

      
 
   
        
        <div class="container align-items-center d-flex justify-content-center">
            <button id="filterButton" type="submit" class="btn btn-outline-primary btn-block mt-3" style="width: 300px; background: ">Filter to Selected Area</button>
        </div> 

    <!-- Iteration 4: -->
    <!-- User Reviews -->
    <!-- REF: Sample Comment Cards (MDBoostrap, 2024) -->
    <!-- REF: Refined by ChatGPT (ChatGPT, 2024) - "This is the code for boostrap comments, but when i loop through one the style is skewed, fix this"--> 
    <section style="background-color: #f5f5f5;">
        <div class="container my-5 py-5">
            <div class="row d-flex justify-content-center">
                <div class="col-md-12 col-lg-10">
                    <div class="card text-dark">
                        <div class="card-body p-4">
                            <h4 class="mb-0">User Reviews</h4>
                            <p class="fw-light mb-4 pb-2">Most recent</p>
    
                            <!-- Looping Through Tiles -->
                            {% block userReviews %}
                                {% if review_list %}
                                    {% for Review in review_list %}
    
                                        <div class="card mb-3 border-0">
                                            <div class="card-body d-flex">
                                                <!-- Avatar icon column -->
                                                <div class="me-3">
                                                    <img class="rounded-circle shadow-1-strong" src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(23).webp" alt="avatar" width="60" height="60" />
                                                </div>
                                                <!-- Review content column -->
                                                <div class="flex-grow-1">
                                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                                        <div>
                                                            <h6 class="fw-bold mb-1">{{ Review.userID.username }}</h6>
                                                            <p class="mb-0">{{ Review.publishDate }}</p>
                                                        </div>
                                                        <div class="text-end">
                                                            <div class="text-end mb-1"><b>{{ Review.policeID.policeName }}</b></div> 
                                                            <div class="text-end">Safety Rating: <b>{{ Review.feelRating }}</b>/5</div>
                                                        </div>
                                                    </div>
                                                    <p class="mb-0">{{ Review.reviewText }}</p>
                                                    {% if Review.image %}
                                                        <br>
                                                        <img style="width:40%; box-shadow: 0px 0px 10px black;" class="small-image" src="{{ Review.image.url }}" alt="crime_image" onclick="openImagePopup('{{ Review.image.url }}')">
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
    
                                        <hr> 
    
                                    {% endfor %}
    
                                {% else %}
                                    <p>No reviews available for this area</p>
                                {% endif %}
    
                            {% endblock %}
    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    

    <!-- Iteration 4: -->
    <!-- Navigation Button for more details -->

    <section id="search-bar">
        <div class="container px-5" style="padding-top:30px">
            <div class="row gx-5 align-items-center"> 
                <!-- Right: See Crime Data -->
                <div class="col-lg-6 order-lg-1">                       
                    <div class="p-5" style="text-align:center">
                        <a href="{% url 'crime_page' %}" class="btn btn-primary btn-lg">See Crime Data</a>
                    </div>
                </div>
                <!-- Right: See USer Reviews -->
                <div class="col-lg-6 order-lg-1">                       
                    <div class="p-5" style="text-align:center">
                        <a href="" class="btn btn-primary btn-lg">See User Reviews</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
   
        <hr />

        <!-- Iteration 4 --> 
        <!-- CRIME STATS -->
        <!-- REF: Styled Tables (Bootstrap, 2024) -->
        <!-- REF: Showing Items from DB (Codemy.com, 2021) Youtube [18:41] -->
        <section>
            <div class= 'container'>

                {% block crime %}

                    <h1>Crime List</h1>

                    <!-- Check if crime_list is empty -->
                    {% if crime_list %}

                    <!-- Table with Crime Stats -->
                    <table id="crime-table" class="table table-striped" >
                        <thead>
                        <tr>
                            <th>Location</th>
                            <th>Crime Type</th>
                            <th>Occurences in 2022</th>
                        </tr>
                        </thead>
                  
                        {% for CrimeRecord in crime_list %}
           
                    <tbody>
                        <tr>
                            <td>{{ CrimeRecord.policeID.policeName }}</td>
                            <td>{{ CrimeRecord.crimeType }}</td>
                            <td>{{ CrimeRecord.value}}</td>
                        </tr>
                    </tbody>
                    

                        {% endfor %}
                          
                    </table>
                    {% else %}
                       <p>No crime data available for this area</p>
                    {% endif %}
                {% endblock %} 

            </div>
        </section>
   


             <!-- Iteration 2 -->    
        <!-- AREA ANALYTICS-->
        <!-- 
        <section id="area-analytics">
            <div class="container px-5">

                <!-- Analytics Tiles 
                <div class="row align-items-center"> 
                        <!-- Metric 1 
                        <div class="col">
                            <div class="p-5" style="text-align:center">
                                <h2 class="display-4" id="Robberies">{{ my_variable }}</h2>
                                <h3>Robberies</h3>
                                <h6>In 2022</h6>
                            </div>
                        </div>

                        <!-- Metric 2 
                        <div class="col">
                            <div class="p-5" style="text-align:center">
                                <h2 class="display-4">34</h2>
                                <h3>Assaults</h3>
                                <h6>In 2022</h6>
                            </div>
                        </div>
                    

                        <!-- Metric 3 
                        <div class="col">
                            <div class="p-5" style="text-align:center">
                                <h2 class="display-4">26</h2>
                                <h3>Unsocial Behaviour</h3>
                                <h6>In 2022</h6>
                            </div>
                        </div>

                        <!-- Metric 4
                        <div class="col">
                            <div class="p-5" style="text-align:center">
                                <h2 class="display-4">56</h2>
                                <h3>Drug Related</h3>
                                <h6>In 2022</h6>
                            </div>
                        </div>   
                </div>
            </div>
        </section>    

    
    -->

        <!-- Footer-->
        <footer class="py-5 bg-black">
            <div class="container px-5"><p class="m-0 text-center text-white small">Copyright &copy; Safe Explorer 2023</p></div>
        </footer>

        <!-- Bootstrap core JS-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-ZVQPg2xuYemKQCq8nd/Hz3I9TwvKZq2qBs1I7k2Vw5LsJEx8m7qHcbz8n0eIIhAI" crossorigin="anonymous"></script>
 
        <!-- Core theme JS-->
        <script src="{% static 'js/scripts.js' %}"></script>


    </body>
</html>


{% comment  %}
////////////////////////////////////////////////////////////////////////////////
                              JavaScript
////////////////////////////////////////////////////////////////////////////////
{% endcomment %}

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="https://unpkg.com/leaflet-ajax/dist/leaflet.ajax.min.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
<script src="https://unpkg.com/leaflet-search/dist/leaflet-search.min.js"></script>

{% comment  %} <script src="./data/CorkDivisions.js"><</script> might be needed at some point {% endcomment %}
<script>
   
// Iteration 3
// REF: Full Leaflet Tutorial - Youtube [57 mins] (The GIS Hub, 2022)
// Showing Leaflet Base Map
var map = L.map('map').setView([51.898, -8.4788], 12.5);

var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    });
    osm.addTo(map);
     
// Adding Cork divisions from GeoJSON  
var polygonJSON = L.geoJSON.ajax(" {% static 'data/CorkDivisions.geojson' %} ", {
    style: style,  // Add the style function here
    onEachFeature: onEachFeature
}).addTo(map);

// Iteration 3
// COLOR GRADIENT TO SECTOR BASED ON SAFETY RATING
// REF: Leaflet Documentation (Leafletjs.com, 2023) 
function getColor(crimeRating) {
    return crimeRating < 1 ? '#ed0000' :
            crimeRating < 2 ? '#f75200' :
            crimeRating < 3 ? '#ff9100' :
            crimeRating < 4 ? '#ecff5e' :
            crimeRating < 5 ? '#87d904' :
            crimeRating < 6 ? '#17ba02' :
                      '#dbdbdb';
}
// Adjusting style of sectors
function style(feature) {
    return {
        fillColor: getColor(feature.properties.crimeRating),
        color: 'black',
        weight: 1.5,
        opacity: 0.25,
        fillOpacity: 0.45,
    };
}

// Iteration 3
// HOVER/CLICK SECTOR ANIMATION + TOOLTIP
// REF: Full Leaflet Tutorial - Youtube [57 mins] (The GIS Hub, 2022), aslo in 
// Hovering highlights sector 
function highlightFeature(e) {
    var layer = e.target;
    info.update(layer.feature.properties);

    layer.setStyle({
        weight: 8,
        color: 'black',
        dashArray: '',
        fillOpacity: 0.7
    });

    layer.bringToFront();

    // Create the tooltip content
    var properties = layer.feature.properties;
    var tooltipContent = "<b>Area: " + properties.policeName + "</b>" +" <br>" 
        + "Safety Rating: " + properties.crimeRating + "/5";
    // Bind the tooltip to the layer and open it
    layer.bindTooltip(tooltipContent).openTooltip();
}

// Un-hovering removes highlight from sector
function resetHighlight(e) {
    polygonJSON.resetStyle(e.target);
    info.update();
}

// Clicking sector zooms to feature
function zoomToFeature(e) {
    map.fitBounds(e.target.getBounds());
}

// Live hover and click functionality
function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: function(e) {
            // Remove the existing marker
            if (currentMarker) {
                map.removeLayer(currentMarker);
                currentMarker = null;
            }

            // Update the location name
            updateLocationName(feature.properties.policeName);

            // Zoom to the feature
            zoomToFeature(e);

            filterCrime(feature.properties.policeID);
        }
    });
}

// Search Bar within Map
// L.Control.geocoder().addTo(map);

// Iteration 3
// PRINT SEARCHED ADDRESS AS HTML
// REF: ChatGPT - "I'm using leaflet js map and my own created geojson to create polygons/sectors on a map. Depending on what address is searched in the search bar inside the leaflet search bar, i want to change the HTML text 'Location Name' to the corresponding GeoJson  polygons's 'policeName' property if the marker/address is within that polygon boundary i created. Also i don't want it to make duplaicate markers. Here is my exisitng code: x"
var currentMarker = null; // Variable to store the current marker - stops duplicate markers

// Initialize the geocoder control
var geocoder = L.Control.geocoder({ 
    defaultMarkGeocode: false
})
    .on('markgeocode', function(e) {
        var latlng = e.geocode.center;
        var found = false;

        // Loop through each feature in your GeoJSON layer
        polygonJSON.eachLayer(function(layer) {
            if (isMarkerInsidePolygon(latlng, layer)) {
                updateLocationName(layer.feature.properties.policeName);
                filterCrime(layer.feature.properties.policeID);
                found = true;
            }
        });

        if (!found) {
            updateLocationName("This location is currently not supported"); // Message if searched location not inside Cork City 
        }

        // Remove the previous marker if it exists
        if (currentMarker) {
            map.removeLayer(currentMarker);
        }
        
        // Add the new marker and store it in the currentMarker variable
        currentMarker = L.marker(latlng).addTo(map).bindPopup(e.geocode.name).openPopup();
    })
    .addTo(map);

// Check if marker is inside a polygon
function isMarkerInsidePolygon(marker, poly) {
    var inside = false;
    var x = marker.lat, y = marker.lng;
    for (var ii=0;ii<poly.getLatLngs().length;ii++){
        var polyPoints = poly.getLatLngs()[ii];
        for (var i = 0, j = polyPoints.length - 1; i < polyPoints.length; j = i++) {
            var xi = polyPoints[i].lat, yi = polyPoints[i].lng;
            var xj = polyPoints[j].lat, yj = polyPoints[j].lng;

            var intersect = ((yi > y) != (yj > y))
                && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
            if (intersect) inside = !inside;
        }
    }

    return inside;
};

// Iteration 3
// MAP SEARCH FUNCTION 
// REF: Full Leaflet Tutorial - Youtube [57 mins] (The GIS Hub, 2022) + ChatGPT to refine ("I'm using leaflet js map and my own created geojson to create polygons/sectors on a map. Depending on what address is searched in the search bar inside the leaflet search bar, i want to change the HTML text 'Location Name' to the corresponding GeoJson  polygons's 'policeName' property if the marker/address is within that polygon boundary i created. Here is my exisitng code: x")
var searchControl = new L.Control.Search({
    layer: polygonJSON,
    propertyName: 'policeName',
    marker: false,
    moveToLocation: function(latlng, title, map) {
        // map.fitBounds( latlng.layer.getBounds() );
        var zoom = map.getBoundsZoom(latlng.layer.getBounds());
        map.setView(latlng, zoom); // access the zoom
        
    }
});

map.addControl(searchControl);

// Function to update the location name in HTML
function updateLocationName(name) {
    document.getElementById('location-name').textContent = name;
}

// Iteration 4:
// Filtering crime by clicked sector
// REF: (ChatGPT, 2024) - this URL works so that if the form is submitted, in this examples police_ID was given the value of '2' the records with policeID == 2 show up. http://127.0.0.1:8000/crime/?sector_like=&police_ID=2&dropdown_sectors=Cork+%28All%29 on the same basis i want to do that, but so that the value of Police_ID in URL is equal to the vlaue of var locationFilter from function filterCrime
var url;
var urlParams = new URLSearchParams(window.location.search);
var locationFilter = urlParams.get('police_ID');

function updateLocationNameFromID(policeID) {
    // Loop through each layer in the GeoJSON layer
    polygonJSON.eachLayer(function(layer) {
        // Check if the layer's feature has the same policeID as the one passed
        if (layer.feature.properties.policeID === policeID) {
            // Update the HTML element with the corresponding policeName
            document.getElementById('location-name').textContent = layer.feature.properties.policeName;
            return; // Exit the loop once the matching polygon is found
        }
    });
}

function filterCrime(ID) {
    console.log("Filter crime function called");
    // document.getElementById('Robberies').textContent = ID; - Testing showing active policeID
    locationFilter = ID;
    console.log("ID:" + ID);
    console.log("locationFilter:" + ID);
    url = "http://127.0.0.1:8000/map/?sector_like=&police_ID=" + locationFilter + "&dropdown_sectors=Cork+%28All%29";
    updateLocationNameFromID(locationFilter);
}

document.getElementById("filterButton").addEventListener("click", function() {
    console.log("Location Filter: " + locationFilter);
   //url = "http://127.0.0.1:8000/map/?sector_like=&police_ID=" + locationFilter + "&dropdown_sectors=Cork+%28All%29";
   url = "http://127.0.0.1:8000/map/?sector_like=&police_ID=" + locationFilter + "&dropdown_sectors=Cork+%28All%29#:~:text=to%20Selected%20Area-,User%20Reviews,-Most%20recent"
    window.location.href = url;
});


// Wait for the page to be fully loaded before calling updateLocationNameFromID
window.addEventListener('load', function() {
    // Call updateLocationNameFromID with the locationFilter
    updateLocationNameFromID(locationFilter);
});

// Iteration 3
// SIDE INFO PANEL
// REF: Leaflet Documentation (Leafletjs.com, 2023) 
var info = L.control();

info.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
    this.update();
    return this._div;
};
 
info.update = function (props) { // Update side panel based on hovered sector
    this._div.innerHTML = '<h4>Safety Rating</h4>' +  (props ?
        '<b>' + props.policeName + '</b><br/>' 
        + 'Safety Rating: '+ props.crimeRating + '</b><br/>' 
     //   + 'Reviews: '+ props.crimeRating + '</b><br/>' - Next Section
        : 'Hover over a sector');
};

info.addTo(map);


</script>



<!--
REFRERENCES:

Template:
    Template from Bootstrap.com - Startbootstrap.com. (2023). Start Bootstrap. [online] Available at: https://startbootstrap.com/theme/one-page-wonder [Accessed 9 Nov. 2023].
    License: Free to use - https://github.com/startbootstrap/startbootstrap-one-page-wonder/blob/master/LICENSE         

Iteration 2:
    Google for Developers. (2023). The Maps Embed API quickstart. [online] Available at: https://developers.google.com/maps/documentation/embed/quickstart [Accessed 22 Nov. 2023].
    GetBootstrap (2023). Grid system. [online] Getbootstrap.com. Available at: https://getbootstrap.com/docs/4.0/layout/grid/ [Accessed 22 Nov. 2023].
    Stackoverflow (2016). Text outer glow effect using CSS. [online] Stack Overflow. Available at: https://stackoverflow.com/questions/40393497/text-outer-glow-effect-using-css [Accessed 23 Nov. 2023].
    MD Bootstrap (2013). Bootstrap Search - examples & tutorial. [online] MDB - Material Design for Bootstrap. Available at: https://mdbootstrap.com/docs/standard/forms/search/ [Accessed 23 Nov. 2023].

Iteration 3:
    The GIS Hub (2022). Leaflet Full Course || Leaflet Crash Course || Leaflet For Beginners || The GIS Hub. YouTube. Available at: https://www.youtube.com/watch?v=sVVuYUsfb7k [Accessed 7 Jan. 2024].
    Leafletjs.com. (2023). Interactive Choropleth Map - Leaflet - a JavaScript library for interactive maps. [online] Available at: https://leafletjs.com/examples/choropleth/ [Accessed 21 Jan. 2024].
    ChatGPT - "I'm using leaflet js map and my own created geojson to create polygons/sectors on a map. Depending on what address is searched in the search bar inside the leaflet search bar, i want to change the HTML text 'Location Name' to the corresponding GeoJson  polygons's 'policeName' property if the marker/address is within that polygon boundary i created. Also i don't want it to make duplaicate markers. Here is my exisitng code: x"

Iteration 4:
    Codemy.com (2021). Fetch Data From a Database And Output To A Webpage - Django Wednesdays #5. YouTube. Available at: https://www.youtube.com/watch?v=H3joYTIRqKk [Accessed 4 Feb. 2024].
    Bootstrap (2024). Tables. [online] Getbootstrap.com. Available at: https://getbootstrap.com/docs/5.0/content/tables/ [Accessed 4 Feb. 2024].
    Freire, M. (2019). Build a dynamic filtering form with Django // 5 - Filtering by search. YouTube. Available at: https://www.youtube.com/watch?v=vU0VeFN-abU [Accessed 7 Feb. 2024].
    MDBootstrap (2023). Bootstrap Tiles - free examples & tutorial. [online] MDB - Material Design for Bootstrap. Available at: https://mdbootstrap.com/docs/standard/extended/tiles/ [Accessed 8 Feb. 2024].
    ChatGPT (2024) - "This is the code for boostrap comments, but when i loop through one the style is skewed, fix this"
‌    ChatGPT (2024) - "this URL works so that if the form is submitted, in this examples police_ID was given the value of '2' the records with policeID == 2 show up. http://127.0.0.1:8000/crime/?sector_like=&police_ID=2&dropdown_sectors=Cork+%28All%29 on the same basis i want to do that, but so that the value of Police_ID in URL is equal to the value of var locationFilter from function filterCrime (code)"

Images:
    Cork Header Background - Irish Mirror. (2022). Cork claims ‘fittest place’ crown across UK and Ireland. [online] Irish Mirror. Available at: https://www.irishmirror.ie/news/irish-news/health-news/cork-claims-fittest-place-crown-28107536 [Accessed 23 Nov. 2023].
    Homeless Picture - Larry Cummins (2023). ‘Nine long-term vacant homes for every homeless adult’ in Cork. [online] echo live. Available at: https://www.echolive.ie/corknews/arid-41262343.html [Accessed 9 Feb. 2024].

‌

‌-->